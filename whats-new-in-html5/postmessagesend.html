<!doctype html>
<html lang="en">
    <head>
        <meta charset="utf-8">

        <title>Send a message | edelight</title>

        <meta name="description" content="What's new in HTML5 - a presentation by Mirko Höch">
        <meta name="author" content="Mirko Höch">

        <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

        <link rel="stylesheet" href="/css/reveal.min.css">
        <link rel="stylesheet" href="/css/theme/default.css">
    </head>

    <body>
        <script>
            //create popup window
            var domain = 'http://reveal.local';
            var myPopup = window.open(domain + '/postmessagelisten.html','myWindow');

            //periodical message sender
            setInterval(function() {
                var message = 'Hi there fella, it\'s: ' + (new Date().getTime());
                console.log('sending message:  ' + message);
                myPopup.postMessage(message,domain); //send the message and target URI
            },6000);

            //listen to holla back
            window.addEventListener('message',function(event) {
                if(event.origin !== 'http://reveal.local') return;
                console.log('received response:  ',event.data);
            },false);
        </script>
    </body>
</hmtl>